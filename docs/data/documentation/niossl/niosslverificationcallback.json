{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"NIOSSLVerificationCallback"},{"kind":"text","text":" = ("},{"kind":"typeIdentifier","identifier":"doc:\/\/org.swift.docc\/documentation\/NIOSSL\/NIOSSLVerificationResult","preciseIdentifier":"s:6NIOSSL24NIOSSLVerificationResultO","text":"NIOSSLVerificationResult"},{"kind":"text","text":", "},{"kind":"typeIdentifier","identifier":"doc:\/\/org.swift.docc\/documentation\/NIOSSL\/NIOSSLCertificate","preciseIdentifier":"s:6NIOSSL17NIOSSLCertificateC","text":"NIOSSLCertificate"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","identifier":"doc:\/\/org.swift.docc\/documentation\/NIOSSL\/NIOSSLVerificationResult","preciseIdentifier":"s:6NIOSSL24NIOSSLVerificationResultO","text":"NIOSSLVerificationResult"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"content","content":[{"anchor":"discussion","level":2,"type":"heading","text":"Discussion"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This verification callback is usually called more than once per connection, as it is called once"},{"type":"text","text":" "},{"type":"text","text":"per certificate in the peer’s complete certificate chain (including the root CA). The calls proceed"},{"type":"text","text":" "},{"type":"text","text":"from root to leaf, ending with the peer’s leaf certificate. Each time it is invoked with 2 arguments:"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The result of the BoringSSL verification for this certificate"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"SSLCertificate"},{"type":"text","text":" for this level of the chain."}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Please be cautious with calling out from this method. This method is always invoked on the event loop,"},{"type":"text","text":" "},{"type":"text","text":"so you must not block or wait. It is not possible to return an "},{"type":"codeVoice","code":"EventLoopFuture"},{"type":"text","text":" from this method, as it"},{"type":"text","text":" "},{"type":"text","text":"must not block or wait. Additionally, this method must take care to ensure that it does not cause any"},{"type":"text","text":" "},{"type":"text","text":"ChannelHandler to recursively call back into the "},{"type":"codeVoice","code":"NIOSSLHandler"},{"type":"text","text":" that triggered it, as making re-entrant"},{"type":"text","text":" "},{"type":"text","text":"calls into BoringSSL is not supported by SwiftNIO and leads to undefined behaviour."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In general, the only safe thing to do here is to either perform some cryptographic operations, to log,"},{"type":"text","text":" "},{"type":"text","text":"or to store the "},{"type":"codeVoice","code":"NIOSSLCertificate"},{"type":"text","text":" somewhere for later consumption. The easiest way to be sure that the"},{"type":"text","text":" "},{"type":"codeVoice","code":"NIOSSLCertificate"},{"type":"text","text":" is safe to consume is to wait for a user event that shows the handshake as completed,"},{"type":"text","text":" "},{"type":"text","text":"or for channelInactive."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"warning: This callback uses the old-style OpenSSL callback behaviour and is excessively complex to program with."},{"type":"text","text":" "},{"type":"text","text":"Instead, prefer using the NIOSSLCustomVerificationCallback style which receives the entire trust chain at once,"},{"type":"text","text":" "},{"type":"text","text":"and also supports asynchronous certificate verification."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/niossl\/niosslverificationcallback"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/org.swift.docc\/documentation\/NIOSSL\/NIOSSLVerificationCallback","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"A custom verification callback."}],"kind":"symbol","metadata":{"fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"NIOSSLVerificationCallback"}],"title":"NIOSSLVerificationCallback","roleHeading":"Type Alias","role":"symbol","symbolKind":"typealias","externalID":"s:6NIOSSL26NIOSSLVerificationCallbacka","modules":[{"name":"NIOSSL"}],"navigatorTitle":[{"kind":"identifier","text":"NIOSSLVerificationCallback"}]},"hierarchy":{"paths":[["doc:\/\/org.swift.docc\/documentation\/NIOSSL"]]},"references":{"doc://org.swift.docc/documentation/NIOSSL":{"role":"collection","title":"NIOSSL","abstract":[],"identifier":"doc:\/\/org.swift.docc\/documentation\/NIOSSL","kind":"symbol","type":"topic","url":"\/documentation\/niossl"},"doc://org.swift.docc/documentation/NIOSSL/NIOSSLVerificationResult":{"role":"symbol","title":"NIOSSLVerificationResult","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"NIOSSLVerificationResult"}],"abstract":[{"type":"text","text":"The result of an attempt to verify an X.509 certificate."}],"identifier":"doc:\/\/org.swift.docc\/documentation\/NIOSSL\/NIOSSLVerificationResult","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"NIOSSLVerificationResult"}],"url":"\/documentation\/niossl\/niosslverificationresult"},"doc://org.swift.docc/documentation/NIOSSL/NIOSSLCertificate":{"role":"symbol","title":"NIOSSLCertificate","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"NIOSSLCertificate"}],"abstract":[{"type":"text","text":"A reference to a BoringSSL Certificate object ("},{"type":"codeVoice","code":"X509 *"},{"type":"text","text":")."}],"identifier":"doc:\/\/org.swift.docc\/documentation\/NIOSSL\/NIOSSLCertificate","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"NIOSSLCertificate"}],"url":"\/documentation\/niossl\/niosslcertificate"},"doc://org.swift.docc/documentation/NIOSSL/NIOSSLVerificationCallback":{"role":"symbol","title":"NIOSSLVerificationCallback","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"NIOSSLVerificationCallback"}],"abstract":[{"type":"text","text":"A custom verification callback."}],"identifier":"doc:\/\/org.swift.docc\/documentation\/NIOSSL\/NIOSSLVerificationCallback","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"NIOSSLVerificationCallback"}],"url":"\/documentation\/niossl\/niosslverificationcallback"}}}